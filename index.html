<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>IPC to BNS Converter</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #b3e5fc;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }
    .container {
      background: white;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.2);
      width: 100%;
      max-width: 600px;
      text-align: center;
    }
    h2 {
      margin-bottom: 20px;
      color: #333;
    }
    input, button {
      padding: 12px;
      font-size: 16px;
      margin: 10px 0;
      width: 100%;
      border-radius: 8px;
      border: 2px solid #333;
      box-sizing: border-box;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background: #388E3C;
    }
    .hidden {
      display: none;
    }
    .error {
      color: red;
      margin-top: 10px;
    }
    .result {
      margin-top: 20px;
      padding: 15px;
      border-left: 5px solid #4CAF50;
      background: #f1f8e9;
      text-align: left;
    }
    .search-results {
      text-align: left;
      margin-top: 10px;
      background: #f5f5f5;
      border-radius: 10px;
      max-height: 200px;
      overflow-y: auto;
    }
    .search-results div {
      padding: 10px;
      cursor: pointer;
    }
    .search-results div:hover {
      background: #e0f7fa;
    }
  </style>
</head>
<body>

<div class="container" id="loginSection">
  <h2>🔒 Login</h2>
  <input type="text" id="username" placeholder="Username">
  <input type="password" id="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="error" id="loginError">Invalid username or password</div>
</div>

<div class="container hidden" id="mainApp">
  <button onclick="logout()" style="float:right; background:#e74c3c;">Logout</button>
  <h2>Indian Penal Code to Bharatiya Nyay Sanhita, 2023</h2>

  <input type="text" id="searchInput" placeholder="🔍 Type Keyword to Search old IPC Section" oninput="searchSections(this.value)">
  <div class="search-results" id="searchResults"></div>

  <input type="text" id="ipcInput" placeholder="Enter IPC Section (e.g., 302)">
  <button onclick="convert()">CLICK</button>

  <div class="result" id="resultBox" style="display:none;"></div>
</div>

<script>
  const ipcMap = {
    '302': { bns: '103', desc: 'Punishment for murder' },
    '304': { bns: '105', desc: 'Culpable homicide not amounting to murder' },
    '307': { bns: '109', desc: 'Attempt to murder' },
    '375': { bns: '63', desc: 'Rape' },
    '376': { bns: '64', desc: 'Punishment for rape' },
    '379': { bns: '304', desc: 'Punishment for theft' },
    '420': { bns: '318', desc: 'Cheating and dishonestly inducing delivery of property' }
  };

  const keywords = {
    'murder': '302',
    'homicide': '304',
    'attempt to kill': '307',
    'rape': '375',
    'sexual violence': '376',
    'theft': '379',
    'cheating': '420'
  };

  function login() {
    const u = document.getElementById('username').value.trim();
    const p = document.getElementById('password').value.trim();
    const error = document.getElementById('loginError');

    if (u === 'admin' && p === '1234') {
      document.getElementById('loginSection').classList.add('hidden');
      document.getElementById('mainApp').classList.remove('hidden');
      error.style.display = 'none';
    } else {
      error.style.display = 'block';
    }
  }

  function logout() {
    document.getElementById('mainApp').classList.add('hidden');
    document.getElementById('loginSection').classList.remove('hidden');
    document.getElementById('resultBox').style.display = 'none';
    document.getElementById('searchResults').innerHTML = '';
    document.getElementById('searchInput').value = '';
    document.getElementById('ipcInput').value = '';
  }

  function convert() {
    const ipc = document.getElementById('ipcInput').value.trim();
    const result = document.getElementById('resultBox');

    if (ipcMap[ipc]) {
      const bnsData = ipcMap[ipc];
      result.innerHTML = `<b>IPC ${ipc}:</b> ${bnsData.desc}<br><b>BNS ${bnsData.bns}</b>`;
      result.style.display = 'block';
    } else {
      result.innerHTML = 'No matching section found.';
      result.style.display = 'block';
    }
  }

  function searchSections(keyword) {
    const results = document.getElementById('searchResults');
    results.innerHTML = '';
    if (keyword.length < 2) {
      results.style.display = 'none';
      return;
    }

    let found = false;
    for (let [desc, section] of Object.entries(keywords)) {
      if (desc.includes(keyword.toLowerCase())) {
        const item = document.createElement('div');
        item.textContent = `IPC ${section} - ${ipcMap[section].desc}`;
        item.onclick = () => {
          document.getElementById('ipcInput').value = section;
          results.innerHTML = '';
          results.style.display = 'none';
        };
        results.appendChild(item);
        found = true;
      }
    }

    if (!found) {
      results.innerHTML = '<div>No results found</div>';
    }

    results.style.display = 'block';
  }
</script>

</body>
</html>
